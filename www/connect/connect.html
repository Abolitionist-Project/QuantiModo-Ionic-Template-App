<html>
	<head>
		<script src="../js/apps.js"></script>
		<script>
			var getAppNameFromUrl = function () {
			    var sPageURL = document.location.toString().split('?')[1];
			    if(!sPageURL) return false;
			    var sURLVariables = sPageURL.split('&');
			    if(!sURLVariables) return false;
			    for (var i = 0; i < sURLVariables.length; i++)
			    {
			        var sParameterName = sURLVariables[i].split('=');
			        if (sParameterName[0] == 'app')
			        {
			            return sParameterName[1].split('#')[0];
			        }
			    }
			    return false;
			};

			var url = '';
			if(getAppNameFromUrl()){
			    url = appsManager.getAppConfig(getAppNameFromUrl());
			} else url = appsManager.getDefaultConfig();


	        var fileref=document.createElement('script')
	        fileref.setAttribute("type","text/javascript");
	        fileref.setAttribute("src", '../'+url);
	        document.getElementsByTagName("head")[0].appendChild(fileref);
		</script>
	</head>
	<body></body>
	
	<script>
		var intervalChecker = setInterval(function(){
		    if(typeof config !== "undefined"){
		    	
		    	var fileref=document.createElement('script')
		    	fileref.setAttribute("type","text/javascript")
		    	fileref.setAttribute("src", '../../../../qm-connect/connect.js');
		    	document.getElementsByTagName("head")[0].appendChild(fileref);

		        clearInterval(intervalChecker);

		        var checker = setInterval(function(){
		        	if(typeof qmSetupOnIonic !== "undefined"){
		        		clearInterval(checker);
		        		qmSetupOnIonic();	
		        	}
		        }, 100);
		        
		    }
		}, 100);
	</script>	
</html>
